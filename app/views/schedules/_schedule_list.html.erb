<script type="text/javascript">
  function next_val(field) {
    switch(field.val()) {
    case "asc":
      field.val("desc");
      break;
    case "desc":
      field.val("");
      break;
    default:
      field.val("asc");
    }
    
    $("#schedule_search_form input[name='commit']").click();
  }
  
  function toggle_sort_by_job() {
    next_val($("#sort_by_job"));
  }
  
  function toggle_sort_by_user() {
    next_val($("#sort_by_user"));
  }
  
  function toggle_sort_by_schedule_date() {
    next_val($("#sort_by_schedule_date"));
  }
</script>
<% unless @schedules.nil? %>
  <table class="table table-bordered table-striped">
    <tr>
      <th>Job</th>
      <th>User</th>
      <th>Schedule Date</th>
      <th>Hours</th>
      <th>Total Hours</th>
      <th></th>
      <th></th>
    </tr>

  <% @schedules.each do |schedule| %>
    <tr>
      <td><%= link_to schedule.job.name, schedule %></td>
      <td><%= link_to schedule.user.full_name, schedule %></td>
      <td><%= schedule.schedule_date %></td>
      <td><%= "#{schedule.from_time.strftime("%I:%M%P")} - #{schedule.to_time.strftime("%I:%M%P")}" unless schedule.from_time.nil? || schedule.to_time.nil? %></td>
      <td><%= schedule.hours %></td>
      <td><%= link_to 'Edit', edit_schedule_path(schedule) %></td>
      <td><%= link_to 'Delete', schedule, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
  <% end %>
  </table>
<% end %>
